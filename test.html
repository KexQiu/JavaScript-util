<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //防抖

        
        const debounceNow = (fn, delay, immediate) => {
    // 创建一个变量用于储存计时器，由于闭包，不会被垃圾回收机制回收
    let timeout
    // 用于标记是否已经执行过函数
    let canDo = true
    return (...args) => {
        // 绑定this
        const self = this
        // 立即执行一次，并将标记取反
        if(immediate && canDo) {
            canDo = !canDo
            fn.call(self, ...args)
        }
        // 若之前有过定时器则清除定时器
        if(timeout) clearTimeout(timeout)
        // 绑定定时器
        timeout = setTimeout(()=>{
            if (immediate) {
                canDo = !canDo
            } else {
                fn.call(self, ...args)
            }
        },delay)
    }
}

        const log = (...args) => {
            console.log(args);
        }

        const debounceFn1 = debounceNow(log,500,true)
    </script>
    <div style="border: 1px solid black; width: 200px; height: 200px;" onmousemove="debounceFn1(1,2,3)" ></div>
    <!-- <input type="text" onchange="debounce((...arg)=>{console.log(arg);},500)"> -->
</body>
</html>